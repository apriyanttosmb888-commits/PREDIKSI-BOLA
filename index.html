<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generator Tabel Prediksi Bola</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: Arial, sans-serif; background: #1a1a2e; padding: 20px; }

  .input-area { background: #222; border-radius: 6px; padding: 16px; margin-bottom: 20px; }
  .input-area label { display: block; color: #ff4500; font-weight: bold; font-size: 0.9rem; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
  .panduan { background: #111; border-left: 3px solid #ff4500; padding: 10px 14px; font-size: 0.78rem; color: #999; line-height: 1.9; margin-bottom: 10px; border-radius: 3px; }
  .panduan b { color: #ffd700; }
  textarea { width: 100%; height: 300px; background: #0d0d0d; color: #ddd; border: 1px solid #444; border-radius: 4px; padding: 12px; font-family: 'Courier New', monospace; font-size: 0.82rem; line-height: 1.8; resize: vertical; }
  textarea:focus { outline: none; border-color: #ff4500; }
  .btn-row { display: flex; gap: 10px; margin-top: 12px; align-items: center; flex-wrap: wrap; }
  .btn { padding: 10px 24px; border: none; border-radius: 4px; font-size: 0.85rem; font-weight: bold; cursor: pointer; letter-spacing: 1px; text-transform: uppercase; transition: opacity 0.2s; }
  .btn:hover { opacity: 0.8; }
  .btn-ok    { background: #e84118; color: #fff; }
  .btn-reset { background: #555;    color: #fff; }
  .btn-salin { background: #0d6efd; color: #fff; }
  .ok-msg { color: #2ecc71; font-size: 0.82rem; display: none; font-weight: bold; }
  .ok-msg.tampil { display: inline; }

  /* Preview area pakai style yang sama dengan output */
  #hasil { margin-top: 4px; }

  /* ====== STYLE PREVIEW ‚Äî sama persis dengan custom-table-watitoto3 ====== */
  .custom-table-watitoto3 table {
    width: 90%;
    margin: 0 auto 20px;
    border-collapse: collapse;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    border-radius: 8px;
    overflow: hidden;
    background-color: transparent;
    table-layout: fixed;
  }
  .custom-table-watitoto3 th,
  .custom-table-watitoto3 td {
    padding: 8px;
    text-align: center;
    font-size: 14px;
    min-width: 80px;
  }
  .custom-table-watitoto3 th {
    background-color: #FF3300;
    color: black;
    font-size: 16px;
  }
  .custom-table-watitoto3 tr:hover {
    background-color: rgba(0,0,0,0.25);
  }
  .custom-table-watitoto3 tr:nth-child(even) {
    background-color: transparent;
  }
  @media (max-width: 600px) {
    .custom-table-watitoto3 th,
    .custom-table-watitoto3 td {
      padding: 6px;
      font-size: 10px;
    }
  }

  .kosong { text-align: center; color: #555; padding: 30px; font-size: 0.88rem; font-style: italic; }
</style>
</head>
<body>

<div class="input-area">
  <label>‚öΩ Paste Data Prediksi ‚Äî Format Apa Saja Bisa</label>
  <div class="panduan">
    <b>Format 1 (pakai pemisah |):</b><br>
    [NAMA LIGA]<br>
    23/02 04:00 WIB | Tim A vs Tim B | 1:1 | https://link (opsional)<br><br>
    <b>Format 2 (langsung paste tanpa pemisah):</b><br>
    COLOMBIA PRIMERA B<br>
    23/02 03:00 WIB Real Cundinamarca vs Orsomarso SC 1 : 1<br><br>
    ‚úÖ HTML yang di-copy sudah pakai format <b>custom-table-watitoto3</b> ‚Äî langsung tempel ke website kamu.
  </div>

  <textarea id="dataInput" placeholder="Paste data prediksi di sini...

Contoh Format 1:
[ENGLISH PREMIER LEAGUE]
22/02 21:00 WIB | Crystal Palace vs Wolverhampton | 1:1 | https://example.com/1
22/02 21:00 WIB | Nottingham Forest vs Liverpool | 0:2

Contoh Format 2:
COLOMBIA PRIMERA B
23/02 03:00 WIB Real Cundinamarca vs Orsomarso SC 1 : 1
23/02 03:00 WIB Bogota FC vs Boca Juniors de Cali 2 : 1"></textarea>

  <div class="btn-row">
    <button class="btn btn-ok"    onclick="buatTabel()">üîÑ Generate Tabel</button>
    <button class="btn btn-reset" onclick="resetSemua()">üóëÔ∏è Reset</button>
    <button class="btn btn-salin" onclick="salinHTML()">üìã Copy HTML</button>
    <span class="ok-msg" id="pesanOk">‚úÖ HTML tersalin! Siap ditempel ke website.</span>
  </div>
</div>

<div id="hasil">
  <div class="kosong">Paste data di atas lalu klik "Generate Tabel"</div>
</div>

<script>

// ============================================================
// HTML yang di-copy = format custom-table-watitoto3 PERSIS
// ============================================================
const CSS_OUTPUT = `<style>
  .custom-table-watitoto3 table {
    width: 90%;
    margin: 0 auto 20px;
    border-collapse: collapse;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    border-radius: 8px;
    overflow: hidden;
    background-color: transparent;
    table-layout: fixed;
  }
  .custom-table-watitoto3 th, .custom-table-watitoto3 td {
    padding: 8px;
    text-align: center;
    font-size: 14px;
    min-width: 80px;
  }
  .custom-table-watitoto3 th {
    background-color: #FF3300;
    color: black;
    font-size: 16px;
  }
  .custom-table-watitoto3 tr:hover {
    background-color: rgba(0, 0, 0, 0.25);
  }
  .custom-table-watitoto3 tr:nth-child(even) {
    background-color: transparent;
  }
  @media (max-width: 600px) {
    .custom-table-watitoto3 th, .custom-table-watitoto3 td {
      padding: 6px;
      font-size: 10px;
    }
  }
</style>`;

// ============================================================
// PARSER
// ============================================================
function adalahHeaderLiga(b) {
  if (/^\[.+\]$/.test(b)) return true;
  const adaTanggal = /\d{2}\/\d{2}/.test(b);
  const adaVs      = /\bvs\b/i.test(b);
  const adaSkor    = /\d\s*:\s*\d/.test(b);
  const adaPipe    = b.includes('|');
  if (!adaTanggal && !adaVs && !adaSkor && !adaPipe && b.length > 3 && b.length < 70) return true;
  return false;
}

function parseBaris(b) {
  if (b.includes('|')) {
    const kol = b.split('|').map(k => k.trim());
    return { tanggal: kol[0]||'', match: kol[1]||'', skor: kol[2]||'', url: kol[3]||'' };
  }
  const skorMatch = b.match(/(\d+\s*:\s*\d+)\s*$/);
  if (!skorMatch) return null;
  const skor     = skorMatch[1].replace(/\s+/g, ' ').trim();
  const sisa     = b.slice(0, b.lastIndexOf(skorMatch[0])).trim();
  const tglMatch = sisa.match(/^(\d{2}\/\d{2}\s+\d{2}:\d{2}\s+\w+)\s+/);
  let tanggal = '', match = sisa;
  if (tglMatch) { tanggal = tglMatch[1]; match = sisa.slice(tglMatch[0].length).trim(); }
  return { tanggal, match, skor, url: '' };
}

// ============================================================
// BUILD ‚Äî hasilkan HTML tabel format watitoto3
// ============================================================
function buildTabelLiga(namaLiga, dataLiga, forCopy) {
  const nm = namaLiga.replace(/^\[|\]$/g, '');

  // Buat baris-baris <tr>
  let rows = '';
  dataLiga.forEach(b => {
    const p = parseBaris(b);
    if (!p) return;

    let isiMatch, isiSkor;
    if (p.url) {
      isiMatch = `<a href="${p.url}" target="_blank" style="color:inherit;text-decoration:none;">${p.match}</a>`;
      isiSkor  = `<a href="${p.url}" target="_blank" style="color:inherit;text-decoration:none;">${p.skor}</a>`;
    } else {
      isiMatch = p.match;
      isiSkor  = p.skor;
    }

    rows += `<tr>
<td>${p.tanggal}</td>
<td>${isiMatch}</td>
<td>${isiSkor}</td>
</tr>
`;
  });

  if (!rows) return '';

  return `<!-- ${nm} -->
<table>
<tbody>
<tr>
<th colspan="3">${nm}</th>
</tr>
<tr>
<th>Tanggal &amp; Waktu</th>
<th>Pertandingan</th>
<th>Skor</th>
</tr>
${rows}</tbody>
</table>
`;
}

function prosesData(forCopy) {
  const teks = document.getElementById('dataInput').value.trim();
  if (!teks) return null;

  const semuaBaris = teks.split('\n');
  let htmlTabel = '';
  let namaLiga  = null;
  let dataLiga  = [];
  let adaHasil  = false;

  function flush() {
    if (!namaLiga || dataLiga.length === 0) return;
    const blok = buildTabelLiga(namaLiga, dataLiga, forCopy);
    if (blok) { htmlTabel += blok; adaHasil = true; }
    dataLiga = [];
  }

  semuaBaris.forEach(b => {
    b = b.trim();
    if (!b) return;
    if (adalahHeaderLiga(b)) { flush(); namaLiga = b; }
    else if (namaLiga) dataLiga.push(b);
  });
  flush();

  if (!adaHasil) return null;

  if (forCopy) {
    // Output untuk di-copy: CSS + wrapper div custom-table-watitoto3
    return `<div class="custom-table-watitoto3">\n<p></p>\n${CSS_OUTPUT}\n${htmlTabel}</div>`;
  } else {
    // Preview di halaman ini: bungkus dengan div watitoto3 agar style berlaku
    return `<div class="custom-table-watitoto3">${htmlTabel}</div>`;
  }
}

function buatTabel() {
  const html = prosesData(false);
  document.getElementById('hasil').innerHTML = html
    || '<div class="kosong">Format tidak dikenali. Pastikan ada nama liga dan data pertandingan.</div>';
}

function resetSemua() {
  document.getElementById('dataInput').value = '';
  document.getElementById('hasil').innerHTML = '<div class="kosong">Paste data di atas lalu klik "Generate Tabel"</div>';
}

function salinHTML() {
  const html = prosesData(true);
  if (!html) {
    alert('Generate tabel dulu sebelum copy HTML!');
    return;
  }
  navigator.clipboard.writeText(html).then(() => {
    const p = document.getElementById('pesanOk');
    p.classList.add('tampil');
    setTimeout(() => p.classList.remove('tampil'), 3000);
  });
}
</script>
</body>
</html>
